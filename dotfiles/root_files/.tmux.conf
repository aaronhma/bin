#Doc: http://manpages.ubuntu.com/manpages/precise/en/man1/tmux.1.html

set -g default-command /bin/zsh
set -g default-shell /bin/zsh

# Rebinding the Action Key
# Now every subsequent command will be prefixed with Ctrl-a instead of Ctrl-b.
set -g prefix C-a

# use the unbind-key, or unbind command to remove a keybinding. free up CTRL-b
unbind C-b

# Sending the Prefix to Other Applications, Vim, Emacs, and Bash shell, etc
bind C-a send-prefix

# PREFIX r so it reloads our main .tmux.conf file in the current session. and output the message "Reloaded!"
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# make tmux display things in 256 colors
set -g default-terminal "screen-256color"
set -g terminal-overrides "*88col*:colors=88,*256col*:colors=256"

# enabled tmux has a vi mode for working with the buffer
setw -g mode-keys vi

# Changing the Default Delay, set this delay so itâ€™s much more responsive
set -sg escape-time 1

# Setting the Window and Panes Index starting from 1 instead of zero based
set -g base-index 1
setw -g pane-base-index 1

#bind-key C-a last-window

# Remapping the key binding

# horizontal split to PREFIX | and the vertical split to PREFIX -.
bind | split-window -h
bind - split-window -v

# Remapping Movement Keys replacing PREFIX o
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# PREFIX CTRL-h and PREFIX CTRL-l to cycle through the windows by binding those keystrokes to the respective commands:
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+

# PREFIX H, J,  K,  L to change the size of the panes, specific -r means repeatable only PREFIX once
# default repeat limit is 500 milliseconds, by setting the repeat-time option to a higher value.
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# To configure tmux so we can use the mouse, enable mouse mode.
# After enable mouse mode, it will disable the copy & paste feature
set -g mode-mouse on
# set -g mouse-resize-pane on
set-option -g mouse-select-pane on
set-option -g mouse-select-window on
set-window-option -g mode-mouse on
set-window-option -g mode-keys vi

# set the status line's colors
# set the foreground and background colors of the status bar,
# set -g status-fg white
# set -g status-bg black

# setw -g window-status-fg cyan
# setw -g window-status-bg default
# setw -g window-status-attr dim

# setw -g window-status-current-fg white
# setw -g window-status-current-bg red
# setw -g window-status-current-attr bright

# Changing Pane Divider Colors
set -g pane-border-fg green
set -g pane-border-bg black
set -g pane-active-border-fg white
set -g pane-active-border-bg yellow

# Command / message line
# change the background color to black and the text color to white.
set -g message-fg white
set -g message-bg black
set -g message-attr bright


# Configuring Status Bar Items
# set -g status-left "#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P"
# set -g status-right "#[fg=cyan]%d %b %R"


# Identifying Activity in Other Windows
setw -g monitor-activity on
set -g visual-activity on

# Remapping Copy and Paste Keys
unbind [
bind Escape copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
bind -t vi-copy 'y' copy-selection


# Maximize and restore a pane
# Creating a new window and using a temporary tmux window as a placeholder
unbind Up
bind Up new-window -d -n tmp \; swap-pane -s tmp.1 \; select-window -t tmp
# restore the window, Use the swap-pane command to move the pane from the temporary window into the original window, select the original
# pane, and kill off the temporary window
unbind Down
bind Down last-window \; swap-pane -s tmp.1 \; kill-window -t tmp

# tmux-powerline Plugins
set -g status on
# Keeping Status Bar Info Up to Date
set -g status-interval 2
set -g status-utf8 on
set -g status-left-length 60
set -g status-right-length 90
set -g status-justify "centre"

# set -g status-left "#(~/bin/dotfiles/plugins/tmux-powerline/status-left.sh)"
# set -g status-right "#(~/bin/dotfiles/plugins/tmux-powerline/status-right.sh)"

# source ~/bin/dotfiles/plugins/tmux-powerline/tmux-colors-solarized/tmuxcolors.conf

# Sane scrolling: enables native xterm scrolling
set -g terminal-overrides 'xterm*:smcup@:rmcup@'
